<!doctype html>
<!-- Comparison of rendering in handlers vs. rendering in rAF -->
<head>
<style>
html, body {
  width: 100%;
  height: 100%;
  background: black;
  color: white;
  padding: 0;
  margin: 0;
  overflow: hidden;
}
</style>
<meta name="viewport" content="width=device-width, maximum-scale=1.0, user-scalable=no">
</head>
<body>

<div id="touch-freq"></div>
<div id="log"></div>

<script>
var timeMoveStart = null;
var timeMoveEnd = null;
var touchMoveCount = 0;
var isTouching = false;
var activeTouches = [];
// Track frequency of touchmove handler firing.

document.body.addEventListener('touchstart', function() {
  if (!isTouching) {
    timeMoveStart = performance.now();
    touchMoveCount = 0;
    isTouching = true;
  }
});
document.body.addEventListener('touchend', function() {
  document.querySelector('#log').innerHTML = activeTouches.length;

  if (activeTouches.length == 1) {
    var delta = performance.now() - timeMoveStart;
    var frequency = touchMoveCount / delta;
    var formatted = (frequency * 1000).toFixed(2);
    document.querySelector('#touch-freq').innerHTML = formatted + ' Hz';

    isTouching = false;
  }
});
document.body.addEventListener('touchmove', function(e) {
  activeTouches = e.touches;
  if (isTouching) {
    touchMoveCount += 1;
  }
});
</script>
</body>
